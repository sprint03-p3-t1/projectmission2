# 🤖 통합 RAG 시스템

두 개의 서로 다른 RAG 시스템을 통합하여 사용자가 선택하고 비교할 수 있는 통합 인터페이스입니다.

## 🌟 주요 기능

### 🔄 시스템 선택 및 비교
- **FAISS 시스템**: 기존의 단순 벡터 검색 시스템
- **ChromaDB 하이브리드 시스템**: 팀원이 개발한 고급 하이브리드 검색 시스템
- **실시간 비교**: 두 시스템의 결과를 동시에 비교 가능

### 🎯 시스템별 특징

#### 🔵 FAISS 시스템
- **임베딩 모델**: `BAAI/bge-m3`
- **벡터 DB**: FAISS
- **특징**: 빠른 검색 속도, 메모리 효율적
- **용도**: 단순한 의미 기반 검색

#### 🟢 ChromaDB 하이브리드 시스템  
- **임베딩 모델**: `nlpai-lab/KURE-v1`
- **벡터 DB**: ChromaDB
- **재순위화**: CrossEncoder
- **특징**: 
  - 하이브리드 검색 (벡터 + BM25 + 재순위화)
  - 스마트 필터링 (자연어에서 자동 필터 추출)
  - 한국어 최적화 (Kiwi 토크나이저)
  - 메타데이터 기반 검색 지원

## 🚀 사용법

### 1. 시스템 실행
```bash
python run_unified_system.py
```

### 2. 웹 인터페이스 접속
- URL: http://localhost:8501
- 브라우저에서 자동으로 열립니다

### 3. 시스템 선택
- 좌측 사이드바에서 검색 시스템 선택
- **FAISS System**: 기존 시스템
- **ChromaDB Hybrid System**: 팀원 시스템

### 4. 검색 모드
- **단일 모드**: 선택한 시스템으로만 검색
- **비교 모드**: 두 시스템의 결과를 동시에 비교

## 🔧 시스템 관리

### 캐시 관리
- 각 시스템의 캐시를 독립적으로 관리
- 사이드바에서 개별 시스템 캐시 정리 가능

### 시스템 상태
- 실시간 시스템 초기화 상태 확인
- 모델 정보 및 설정 확인

## 📊 성능 비교

| 구분 | FAISS 시스템 | ChromaDB 하이브리드 |
|------|-------------|-------------------|
| **검색 속도** | ⚡ 매우 빠름 | 🔄 보통 |
| **검색 정확도** | 📊 보통 | 🎯 높음 |
| **필터링** | ❌ 제한적 | ✅ 고급 |
| **한국어 지원** | 📝 기본 | 🇰🇷 최적화 |
| **메타데이터 검색** | ❌ 없음 | ✅ 지원 |

## 🎯 사용 시나리오

### FAISS 시스템 추천
- 빠른 검색이 필요한 경우
- 단순한 의미 기반 검색
- 메모리 사용량을 최소화해야 하는 경우

### ChromaDB 하이브리드 시스템 추천
- 정확한 검색 결과가 중요한 경우
- 복잡한 필터링이 필요한 경우
- 한국어 자연어 처리가 중요한 경우
- 메타데이터 기반 검색이 필요한 경우

## 🔍 검색 예시

### 메타데이터 검색 (ChromaDB 하이브리드만 지원)
```
"기초과학연구원 공고 사업금액 알려줘"
"사업금액이 5천만원 이상인 공고 찾아줘"
"입찰 시작일이 2024년 7월 이후인 공고 알려줘"
```

### 의미 기반 검색 (양쪽 모두 지원)
```
"국립인천해양박물관 최종검수 기간은?"
"서울특별시 공공데이터 개방 관련 요구사항"
"졸업요건 관리 기능이 포함된 공고"
```

## 🛠️ 기술 스택

### 공통
- **Python**: 3.11+
- **Streamlit**: 웹 인터페이스
- **LangChain**: 문서 처리 프레임워크

### FAISS 시스템
- **FAISS**: 벡터 검색
- **BAAI/bge-m3**: 임베딩 모델
- **Sentence Transformers**: 임베딩 생성

### ChromaDB 하이브리드 시스템
- **ChromaDB**: 벡터 저장소
- **nlpai-lab/KURE-v1**: 한국어 임베딩 모델
- **CrossEncoder**: 재순위화
- **BM25**: 키워드 검색
- **Kiwi**: 한국어 토크나이저

## 📁 프로젝트 구조

```
src/
├── config/
│   └── unified_config.py      # 통합 설정
├── systems/
│   └── system_selector.py     # 시스템 선택기
├── unified_streamlit_app.py   # 통합 Streamlit 앱
├── rfp_rag_main.py           # 기존 FAISS 시스템
├── retrieval/
│   └── hybrid_retriever.py   # 팀원 ChromaDB 시스템
└── generation/
    └── generator.py          # 공통 생성기
```

## 🔧 설정

### 환경 변수
```bash
# OpenAI API 키 (생성에 필요)
export OPENAI_API_KEY="your-api-key"

# GPU 사용 (선택사항)
export CUDA_VISIBLE_DEVICES="0"
```

### 의존성 설치
```bash
pip install -r requirements.txt
```

## 🐛 문제 해결

### 시스템 초기화 실패
1. 캐시 정리 후 재시도
2. 의존성 패키지 재설치
3. GPU 메모리 부족 시 CPU 모드로 전환

### 검색 결과 없음
1. 문서가 제대로 로드되었는지 확인
2. 검색어를 더 구체적으로 입력
3. 다른 시스템으로 시도

## 📈 향후 계획

- [ ] 더 많은 임베딩 모델 지원
- [ ] 검색 결과 품질 메트릭 추가
- [ ] 배치 검색 기능
- [ ] API 서버 모드 지원
- [ ] 검색 히스토리 및 분석 기능
